// File: article_filters.js
function getFilterCheckBoxes(a){for(var b=filters[a].length,c=new Array,d=0,e=0;b>e;e++)if(void 0!==filters[a][e]){for(var f=new Array,g=0,h=filters[a][e].values.length,i=0;h>i;i++)if(void 0!==filters[a][e].values[i]){var j={checkboxName:"filters",val:filters[a][e].values[i].val,name:filters[a][e].values[i].name,checked:filters[a][e].values[i].checked};f[g++]=j}var k={filter_type:filters[a][e].type_name,filters:f};c[d]=k,d++}return c}function getFiltersValues(){for(var a=0,b=document.getElementsByName("filters"),c=b.length,d=0;c>d;d++)b[d].checked&&(a+=parseInt(b[d].value));return a}function getFilter_content(a){for(var b=getFilterCheckBoxes(a),c=b.length,d='<table cellpadding="0" cellspacing="0">',e=0;c>e;e++){d+='<tr><td nowrap="nowrap"><b>'+b[e].filter_type+' : </b></td><td nowrap="nowrap">';for(var f=b[e].filters.length,g=0;f>g;g++)d+='<div style="width:100px;font-size:11px;" class="general"><input type="checkbox" name="filters" value="'+b[e].filters[g].val+'" '+b[e].filters[g].checked+"/> "+b[e].filters[g].name+"</div>";d+="</td></tr>"}d+="</table>",document.getElementById("filters_div").innerHTML=d}function getFilter_admin(a){for(var b=getFilterCheckBoxes(a),c=b.length,d='<table cellpadding="0" cellspacing="0">',e=0;c>e;e++){d+='<tr><td nowrap="nowrap"><b>'+b[e].filter_type+' : </b></td><td nowrap="nowrap">';for(var f=b[e].filters.length,g=0;f>g;g++)d+='<div style="width:100px;font-size:11px;" class="general"><input type="checkbox" name="filters" value="'+b[e].filters[g].val+'" '+b[e].filters[g].checked+"/> "+b[e].filters[g].name+"</div>";d+="</td></tr>"}d+="</table>",document.getElementById("filters_div").innerHTML=d}function getFilter_memberAdmin(a){if(0==a)return void(document.getElementById("filters_div").innerHTML="");for(var b=getFilterCheckBoxes(a),c=b.length,d="",e=0;c>e;e++){d+='<p class="float_lang_base_1 bold">'+b[e].filter_type+' :</p><ul class="float_lang_base_1 checkboxesBox">';for(var f=b[e].filters.length,g=0;f>g;g++)g>0&&g%2==0&&(d+='<div class="clear"></div>'),d+='<li><input type="checkbox" name="filters" id="'+b[e].filters[g].val+'" value="'+b[e].filters[g].val+'" '+b[e].filters[g].checked+'/> <label for="'+b[e].filters[g].val+'">'+b[e].filters[g].name+"</label></li>";d+='</ul><div class="clear"></div>'}document.getElementById("filters_div").innerHTML=d}function showHideClear(a,b){switch(b){case"clear":$("#li_"+a).slideToggle("slow");break;case!0:1==$("#ul_"+a).find("input:checked").length&&$("#li_"+a).slideToggle("slow");break;case!1:0==$("#ul_"+a).find("input:checked").length&&$("#li_"+a).slideToggle("slow")}}function showHideAuthorDateClear(a,b){a?"on"==$("#dateAutherClear").attr("status")&&($("#dateAutherClear").slideUp("slow"),$("#dateAutherClear").attr("status","off"),$("#dateAutherClear").data("clearDatePicker",!0)):($("#author").val()>0||b)&&"off"==$("#dateAutherClear").attr("status")&&($("#dateAutherClear").slideDown("slow"),$("#dateAutherClear").attr("status","on"),$("#dateAutherClear").data("clearDatePicker",!1))}function getArticlesResult(a,b,c){var d=getFiltersValues(),e=$("#author").val(),f=$("#author option:selected").attr("type"),g=!1,h=$.datepicker._getFromToDates($.datepicker._curInst,"yy-mm-dd");h||(h={dateFromStr:"",dateToStr:""});var i=h.dateFromStr,j=h.dateToStr;$.datepicker._curInst&&(g=$.datepicker._curInst.input.val()==$.datepicker._curInst.settings.defaultDate+" - "+$.datepicker._curInst.settings.defaultDateTo),($("#resetFilters:hover").length||$("#dateAutherClear a:hover").length||$("#dateAutherClear").data("clearDatePicker")||!$.datepicker._curInst||g)&&($("#dateAutherClear").data("clearDatePicker",!1),i=j="");var k=new Array;$("input[name=filters_type_val]").each(function(){k.push(this.value)}),showHideAuthorDateClear(g&&"0"==$("#author").val(),g&&"0"==$("#author").val()),g&&"0"==$("#author").val()&&$.datepicker._curInst.input.data("prevSelected",null),$("#loading_img").fadeToggle(),c&&($(".showMoreCommentsLoading").removeClass("displayNone"),$(".showMoreCommentsLoading").addClass("inlineblock"),$(".dropDownArrow").addClass("displayNone"),$("#paginationShowMoreText").addClass("displayNone")),$.get("/analysis/Service/AnalysisCategoryFilter",{ajax:"1",smlID:a,filter:d,page:b,author_val:e,author_type:f,dateFrom:i,dateTo:j,"filters_type_val[]":k},function(a){c?setTimeout(function(){$(".showMoreCommentsLoading").addClass("displayNone"),$(".showMoreCommentsLoading").removeClass("inlineblock"),$(".dropDownArrow").removeClass("displayNone"),$("#paginationShowMoreText").removeClass("displayNone"),$("#contentSection .articleItem").removeClass("last"),$("#paginationGetMore").remove(),$("#contentSection").append(a),$("#div"+b).fadeIn(1e3)},500):$("#contentSection").html(a)}),$("#loading_img").fadeToggle()}function clearFilters(a,b,c){var d=0;a?(d=$("#ul_"+a).find("input:checked").length,$("#ul_"+a).find("input").attr("checked",!1)):($('input[name="filters"]').attr("checked",!1),clearAuthorDate(c),$("[filterClear]").removeClass("block").addClass("displayNone").css("display","none"),window.clearDefaultText(),d=1),d>0&&getArticlesResult(b)}function clearAuthorDate(a){showHideAuthorDateClear(!0),$("#author").val(0)}function changeLayer(a){ul_class=$("#ul_"+a).attr("status"),"open"==ul_class?($("#span_"+a).removeClass("dropDownArrowBlack").addClass("dropDownClosedArrowBlack"),$("#ul_"+a).attr("status","close")):($("#span_"+a).removeClass("dropDownClosedArrowBlack").addClass("dropDownArrowBlack"),$("#ul_"+a).attr("status","open")),$("#ul_"+a).slideToggle("slow")}