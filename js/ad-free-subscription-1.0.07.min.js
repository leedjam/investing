// File: ad-free-subscription.js
loader([{type:"$",value:".js-subscribe-btn"},"overlay","siteData","setCookie","getCookie",{type:"component",value:"GeneralOverlay"}]).ready(function(a,b,c,d,e,f){function g(){window.ga.loaded?window.ga.apply(window.ga,arguments):h()}function h(){l.submit()}function i(){c.onRegisterFinished=p.onRegisterFinished,c.onLoginFinished=p.onLoginFinished}function j(){c.onRegisterFinished=c.onLoginFinished=null}var k=this,l=k.find(".js-paypal-form"),m=k.find("#userAccount a"),n=k.find(".js-continue-to-site-popup"),o=k.find(".js-pay-popup"),p={onRegisterFinished:function(){return d("isLoggedInFromAdsFree",1),window.location.reload(),!1},onLoginFinished:function(){return d("isLoggedInFromAdsFree",1),!0}};return c.userLoggedIn?c.userSubscribed?(f.show({$popup:n.attr("id",Date.now()),center:!0}),n.find(".js-btn").attr("href","/"),n.find(".js-close").click(function(){f.hide()}),void a.click(function(){f.show({$popup:n.attr("id",Date.now()),center:!0})}).click()):(a.click(function(){g("allSitesTracker.send","event","Ad-Free Subscription","Subscribe Now Button","Logged In Users",{hitCallback:h})}),void(e("isLoggedInFromAdsFree")&&(d("isLoggedInFromAdsFree","",0),f.show({$popup:o.attr("id",Date.now()),center:!0}),o.find(".js-btn").click(function(){g("allSitesTracker.send","event","Ad-Free Subscription","Pay Now Button",{hitCallback:h})}),o.find(".js-close").click(function(){f.hide()}),setTimeout(function(){g("allSitesTracker.send","event","Ad-Free Subscription","User Redirected to PayPal",{hitCallback:h})},5e3)))):(a.click(function(){b.authCompleteAction={type:"adfree"},i(),window.ga("allSitesTracker.send","event","Ad-Free Subscription","Subscribe Now Button","Non-Logged In Users"),b.overlayLogin()}),void m.click(j))});