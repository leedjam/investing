// File: crypto-filter-box.js
!function(){var a={},b=[],c={c1:"first_coins",c2:"second_coins",exchange:"exchanges"},d={},e=function(b){for(var c in a)if(d[b]&&d[b][c]){f.affectedList=[],a[c].showElemntsByCallBack(f.byValue,[d[b][c],0]);for(var e in f.affectedList){var g=d[b][c].indexOf(f.affectedList[e]);g>-1&&d[b][c].splice(g,1)}}},f={affectedList:[],exchange:function(a,b){if(this.data("value")){var c=cryptoFilterVars.exchanges[this.data("value")].relations;return f.getResult(this,b,c,a)}return!1},byValue:function(a,b,c){if(!this.data("value"))return!1;var d=[0,0];return d[b]=this.data("value"),f.getResult(this,c,a,d)},getResult:function(a,b,c,d){var e=!1;for(var g in c){var h=c[g].toString().split(":");for(var i in d)if(d[i]&&d[i]===parseInt(h[i]))e=!0;else if(d[i]){e=!1;break}if(e)break}var j=b&&e||!b&&!e;return j&&f.affectedList.push(a.data("value")),j}};$(".js-crypto-filter-dropdown").each(function(){var g=$(this),h=g.data("filter-type"),i=g.find(".newBtnDropdown .js-crypto-search-input");a[h]=new DropdownSelector(this,i,null,!0,i.attr("placeholder")),g.on("dropDownSelected",function(g,h,i,j){i=parseInt(i);var k=$(g.target),l=$(j),m=k.data("filter-type"),n=!1;k.find("span").attr("class",l.data("span-class"));var o=b.indexOf(m);i?-1===o&&b.push(m):o>-1&&(n=b[0]===m,n&&a[m].getDropDownParent().removeClass("isMainFilter"),b.splice(o,1),b[0]&&(e(m),m=b[0],i=parseInt(a[m].selectedDataValue()))),a[b[0]]&&!a[b[0]].getDropDownParent().hasClass("isMainFilter")&&a[b[0]].getDropDownParent().addClass("isMainFilter"),d[m]||(d[m]={});var p=i?cryptoFilterVars[c[m]][i].relations:null;e(m);for(var q in a)if(q!=m||n){var r=b[0]===q;if(f.affectedList=[],"exchange"==q){if(i&&!r){var s=[parseInt(a.c1.selectedDataValue()),parseInt(a.c2.selectedDataValue())];a[q].hideElemntsByCallBack(f.exchange,[s])}}else if(p&&!r){var t=0;"exchange"==m&&"c2"==q&&(t=1),a[q].hideElemntsByCallBack(f.byValue,[p,t])}-1!==f.affectedList.indexOf(parseInt(a[q].selectedDataValue()))&&a[q].selectByValue(0),d[m][q]=f.affectedList}})});var g=window.location.search.match(/([^?&]+)=([^&]+)/g);if(g){for(var h in g){var i=g[h].split("=");a[i[0]]&&a[i[0]].selectByValue(i[1])}}$(".js-crypto-filter").on("click",function(){$(this).off("click");var c=[];for(var d in b){var e=b[d],f=parseInt(a[e].selectedDataValue());f&&c.push(e+"="+f)}var g="/crypto/currency-pairs";c.length&&(g+="?"+c.join("&")),window.siteData&&6==+window.siteData.domainID?window.open(g,"_blank"):window.location=g})}();