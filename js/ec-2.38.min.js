// File: ec-alerts.js
!function(a,b,c,d){function e(){f&&f.unbind("click"),f=b.find(".js-injected-user-alert-container"),f.each(function(a){var b=f.eq(a),c={data:{id:b.attr("data-alert-id"),eventId:b.attr("data-event-id"),active:"1"===b.attr("data-status-enabled")?1:0,name:b.attr("data-name"),frequency:b.attr("data-frequency")},$el:b};b.bind("click",function(a){return h.popup.getEl().is(a.target)||h.popup.getEl().find(a.target).length?!0:h.popup.isShown()&&g===c?(h.popup.hide(),void(g=null)):(h.popup.appendTo(b,!0),h.form.setDefaultParams(c.data),h.popup.show(),void(g=c))})})}var f,g,h={};loader(["eventPopupParams","userAlertsPopupParams",{type:"$",value:".js-user-alert-popup"}]).ready(function(a,b,d){if(a.globals){var f=c.extend({useGeneralOverlay:!1},a.globals);h.texts=f.texts,h.rowTexts=f.rowTexts,h.popup=new UserAlertsPopup(d,f),h.form=new EventUserAlerts(null,h.texts,h.popup,{disableRemove:!1}),h.form.subscribe(function(a){c.extend(g.data,a),"delete"===a.action?(g.$el.removeClass("hasAlert"),delete g.data.id,g.data.active=0):(g.$el.addClass("hasAlert"),h.form.showSuccessMessage(),g.data.active=1),g=null}),e(),calendarFilters.on("update",e)}})}(window,$(document),jQuery,window.components);
// File: ec.js
function getMoreEventNews(a,b,c){void 0!=c&&$.ajax({url:"/economic-calendar/newsarticles",type:"POST",dataType:"json",data:{page:a,event_attr_ID:b,eventID:0,category:c},success:function(a){var b=$("#event"+c+"Div");$("#paginationGetMore"+c).remove(),b.find(".articleItem.last").removeClass("last"),b.append(a.newsRows)}})}var ecEvent={moreHistory:function(a,b,c){var d=$(b).find("a:first-child");if(void 0===$(d).attr("disabled")){$(d).attr("disabled","disabled");var e="eventHistoryTable"+a,f=$("#"+e+" tr[id^=historicEvent_]:last-child").last(),g=$(f).attr("id"),h=g.replace("historicEvent_",""),i=$(f).attr("event_attr_ID"),j=$(f).attr("event_timestamp");$.ajax({url:"/economic-calendar/more-history",type:"POST",dataType:"json",data:{eventID:h,event_attr_ID:i,event_timestamp:j,is_speech:c},beforeSend:function(){},complete:function(){$("#showMoreHistoryLoader"+a).addClass("displayNone")},success:function(a){$(a.historyRows).appendTo("#"+e),a.hasMoreHistory||$(b).removeClass("showMoreHistory").hide(),$(d).removeAttr("disabled")}})}}};$(document).ready(function(){if(window.CalendarFiltersWidget){var a=window.calendarFilters||new CalendarFiltersWidget("economic");window.components.Timezone.subscribe(function(){a.innerFiltersSubmit()})}});
// File: time-separator.js
!function(a,b,c,d){"use strict";function e(a){if(a=Math.floor(a),60>a)return(a||1)+" "+w.minutesFull;var b=parseInt(a%60);if(b&&10>b&&(b="0"+b.toString()),a>60){var c=parseInt(a/60);return c+w.hours+" "+b+w.minutes}return b+" "+w.minutesFull}function f(){p.each(function(a,c){var d=b(c),f=d.find(".js-time"),h=d.data("datetime");h||(h=new Date(d.attr("data-event-datetime")),d.data("datetime",h));var j,k=(h-s)/1e3,l=Math.abs(k)/60,m=e(l);if(!q||u>a){if(j=g(m,"released"),f.data("eventTime")){var n=f.data("eventTime");f.data("eventTime",!1).text(n)}}else if(60>l){var o=f.data("eventTime")||i(h);f.data("eventTime",o),v&&f.text(m),j=g(o,"upcoming")}else j=g(m,"willReleasedIn");f.attr("title",j)})}function g(a,b){return w.eventsTitles[b].replace("%TIME%",a)}function h(a){return a>9?a:"0"+a.toString()}function i(a){return h(a.getHours())+":"+h(a.getMinutes())}function j(){d.Timezone.setClock(s)}function k(){p.removeClass("timeSeparator");for(var a,b,c=u;c<p.length;c++)if(a=p.eq(c),b=new Date(a.attr("data-event-datetime")),b>s)return a.addClass("timeSeparator"),q=p.eq(c),void(u=c);q=null}function l(){return 1e3*(60-s.getSeconds())}function m(a){var b=s.getSeconds();s=new Date(a),b>s.getSeconds()?y.updateClock(s):n()}function n(){x=Date.now();var a=Math.min(l(),5e3);q&&q.length&&(a=Math.min(new Date(q.attr("data-event-datetime"))-s+1,a)),t=setTimeout(function(){m(s.valueOf()+(Date.now()-x))},a)}var o,p,q,r,s,t,u,v,w,x=new Date,y=d.TimeSeparator={updateClock:function(a){return s=new Date(a),j(),k(),f(),t&&clearTimeout(t),n(),y},updateTable:function(){return u=0,q=null,p=o.find(".js-event-item"),y},init:function(a){return v=r.prop("checked"),y.updateTable().updateClock(a||d.Timezone.getClockEl().attr("data-datetime"))}};loader(["timeSeparatorParams",{type:"component",value:"Timezone"},"calendarFilters"]).ready(function(a,c,d){c.setClockAutoUpdate(!1),o=b("#economicCalendarData"),r=b("#timeFiltertimeRemain"),w=a.texts||{},y.init(null),d.on("update",function(a){"undefined"!=typeof a.result.params&&"undefined"!=typeof a.result.params.timezoneCurrentTime&&(0===a.query.limit_from?y.init(a.result.params.requestDateTimeFormatted):y.updateTable())})})}(window,jQuery,$(document),window.components?window.components:window.components={});